{
  "pluginType": "DB",
  "pluginId": "postgres-plugin",
  "unpublishedAction": {
    "name": "post_collection_declaration_v2",
    "datasource": {
      "name": "Postgres_latest",
      "pluginId": "postgres-plugin",
      "messages": [],
      "isAutoGenerated": false,
      "id": "Postgres_latest",
      "deleted": false,
      "policies": [],
      "userPermissions": []
    },
    "pageId": "collection_declaration",
    "actionConfiguration": {
      "timeoutInMillisecond": 10000,
      "paginationType": "NONE",
      "encodeParamsToggle": true,
      "body": "WITH data(shop_id_data,\n\t\t\t\tshop_name_data,\n\t\t\t\treceived_amount_data,\n\t\t\t\tadjusted_amount_data,\n\t\t\t\tunadjusted_amount_data,\n\t\t\t\tproof_of_amount_received_data,\n\t\t\t\treceive_date_data)\nAS (\nVALUES (\n    {{ shop_id_data_new.selectedOptionValue }},\n    {{\"'\" +  shop_id_data_new.selectedOptionLabel + \"'\"}},\n    {{ received_amount_new.text }},\n\t\t{{ adjusted_amount_new.text }},\n\t\t{{ unadjusted_amount_new.text }},\n\t\t{{ \"'\" + proof_doc_new.image + \"'\"}},\n\t\t{{ \"'\" + moment(receive_date_new).format('YYYY-MM-DD hh:mm') + \"'\"}}\n\t)\n  ),\nins_customer_collection_declation AS (\n    INSERT INTO\n        customer_collection_declation (\n            shop_id,\n\t\t\t\t\t\tshop_name,\n\t\t\t\t\t\treceived_amount,\n\t\t\t\t\t\tadjusted_amount,\n\t\t\t\t\t\tunadjusted_amount,\n\t\t\t\t\t\tproof_of_amount_received,\n\t\t\t\t\t\treceive_date\n        )\n        select \n\t\t\t\t\t\tshop_id_data,\n\t\t\t\t\t\tshop_name_data,\n\t\t\t\t\t\treceived_amount_data,\n\t\t\t\t\t\tadjusted_amount_data,\n\t\t\t\t\t\tunadjusted_amount_data,\n\t\t\t\t\t\tproof_of_amount_received_data,\n\t\t\t\t\t\tcast(receive_date_data as timestamptz)\n\tFROM\n        data \n\tRETURNING id\n),\nins_single_customer_collection_declation AS (\nINSERT INTO\n        single_customer_collection_declation (\n\t\t\t\t\t\treceived_amount,\n\t\t\t\t\t\tadjusted_amount,\n\t\t\t\t\t\tunadjusted_amount,\n\t\t\t\t\t\tproof_of_amount_received,\n\t\t\t\t\t\treceive_date,\n\t\t\t\t\t\tcustomer_collection_declation_id\n        )\n    SELECT\n\t\t\t\treceived_amount_data,\n\t\t\t\tadjusted_amount_data,\n\t\t\t\tunadjusted_amount_data,\n\t\t\t\tproof_of_amount_received_data,\n\t\t\t\tcast(receive_date_data as timestamptz),\n\t\t\t\t(select id from ins_customer_collection_declation)\n    FROM\n        data \n\t\t\t\treturning id\n)\nINSERT INTO\n        customer_collection_declation_log (\n\t\t\t\t\t\treceived_amount,\n\t\t\t\t\t\tadjusted_amount,\n\t\t\t\t\t\tunadjusted_amount,\n\t\t\t\t\t\tproof_of_amount_received,\n\t\t\t\t\t\treceive_date,\n\t\t\t\t\t\tsingle_customer_collection_declation_id\n        )\n    SELECT\n\t\t\t\treceived_amount_data,\n\t\t\t\tadjusted_amount_data,\n\t\t\t\tunadjusted_amount_data,\n\t\t\t\tproof_of_amount_received_data,\n\t\t\t\tcast(receive_date_data as timestamptz),\n\t\t\t\t(select id from ins_single_customer_collection_declation)\n    FROM\n        data \n\t\t\t\treturning single_customer_collection_declation_id",
      "selfReferencingDataPaths": [],
      "pluginSpecifiedTemplates": [
        {
          "value": false
        }
      ]
    },
    "executeOnLoad": false,
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "isValid": true,
    "invalids": [],
    "messages": [],
    "jsonPathKeys": [
      "\"'\" +  shop_id_data_new.selectedOptionLabel + \"'\"",
      "\"'\" + moment(receive_date_new).format('YYYY-MM-DD hh:mm') + \"'\"",
      "\"'\" + proof_doc_new.image + \"'\"",
      "adjusted_amount_new.text",
      "received_amount_new.text",
      "shop_id_data_new.selectedOptionValue",
      "unadjusted_amount_new.text"
    ],
    "userSetOnLoad": false,
    "confirmBeforeExecute": false,
    "policies": [],
    "userPermissions": []
  },
  "id": "collection_declaration_post_collection_declaration_v2",
  "deleted": false,
  "gitSyncId": "6231701cf1c0af1ceded5043_637480841351c74a8ce8bb1f"
}